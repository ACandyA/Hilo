/**
 * Hilo 1.0.4 for amd
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
define("hilo/util/drag",["hilo/core/Hilo"],function(t){var e={startDrag:function(e){function n(e){e.stopPropagation(),o(e),v.off(t.event.POINTER_START,n),v.fire("dragStart",E);var i=v.parent.getConcatenatedMatrix();x.x=v.x,x.y=v.y,i.transformPoint(x),v.__dragX=x.x-E.x,v.__dragY=x.y-E.y,f||(f=this.getStage()),f.on(t.event.POINTER_MOVE,a),document.addEventListener(t.event.POINTER_END,r)}function r(e){document.removeEventListener(t.event.POINTER_END,r),f&&f.off(t.event.POINTER_MOVE,a),v.fire("dragEnd",E),v.on(t.event.POINTER_START,n)}function a(t){o(t),v.fire("dragMove",E),x.x=E.x+v.__dragX,x.y=E.y+v.__dragY;var e=v.parent.getConcatenatedMatrix().invert();e.transformPoint(x),v.x=Math.max(g,Math.min(_,x.x)),v.y=Math.max(T,Math.min(d,x.y))}function o(t){E.preX=E.x,E.preY=E.y,E.x=t.stageX,E.y=t.stageY}function i(){document.removeEventListener(t.event.POINTER_END,r),f&&f.off(t.event.POINTER_MOVE,a),v.off(t.event.POINTER_START,n)}var f,v=this;e=e||[-(1/0),-(1/0),1/0,1/0];var E={x:0,y:0,preX:0,preY:0},g=e[0],T=e[1],_=e[2]==1/0?1/0:g+e[2],d=e[3]==1/0?1/0:T+e[3],x={x:0,y:0};v.on(t.event.POINTER_START,n),v.stopDrag=i},stopDrag:function(){}};return e});