/**
 * Hilo 1.0.4 for kissy
 * Copyright 2016 alibaba.com
 * Licensed under the MIT License
 */
KISSY.add("hilo/util/drag",function(t,e){var n={startDrag:function(t){function n(t){t.stopPropagation(),o(t),f.off(e.event.POINTER_START,n),f.fire("dragStart",E);var i=f.parent.getConcatenatedMatrix();x.x=f.x,x.y=f.y,i.transformPoint(x),f.__dragX=x.x-E.x,f.__dragY=x.y-E.y,v||(v=this.getStage()),v.on(e.event.POINTER_MOVE,a),document.addEventListener(e.event.POINTER_END,r)}function r(t){document.removeEventListener(e.event.POINTER_END,r),v&&v.off(e.event.POINTER_MOVE,a),f.fire("dragEnd",E),f.on(e.event.POINTER_START,n)}function a(t){o(t),f.fire("dragMove",E),x.x=E.x+f.__dragX,x.y=E.y+f.__dragY;var e=f.parent.getConcatenatedMatrix().invert();e.transformPoint(x),f.x=Math.max(d,Math.min(T,x.x)),f.y=Math.max(g,Math.min(_,x.y))}function o(t){E.preX=E.x,E.preY=E.y,E.x=t.stageX,E.y=t.stageY}function i(){document.removeEventListener(e.event.POINTER_END,r),v&&v.off(e.event.POINTER_MOVE,a),f.off(e.event.POINTER_START,n)}var v,f=this;t=t||[-(1/0),-(1/0),1/0,1/0];var E={x:0,y:0,preX:0,preY:0},d=t[0],g=t[1],T=t[2]==1/0?1/0:d+t[2],_=t[3]==1/0?1/0:g+t[3],x={x:0,y:0};f.on(e.event.POINTER_START,n),f.stopDrag=i},stopDrag:function(){}};return n},{requires:["hilo/core/Hilo"]});